const e={diagnosticResults:{tokenStatus:null,permissions:null,redemptionCreation:null,assetLoading:null,apiConnectivity:null},displayElements:{container:null,title:null,items:{},clearButton:null},resetDiagnostics(){this.diagnosticResults={tokenStatus:null,permissions:null,redemptionCreation:null,assetLoading:null,apiConnectivity:null}},async checkTokenStatus(e){try{if(!e)return this.diagnosticResults.tokenStatus={status:"error",message:"No OAuth token provided"},!1;const t=await fetch("https://id.twitch.tv/oauth2/validate",{headers:{Authorization:`OAuth ${e.replace("oauth:","")}`}}).then((e=>e.json())).catch((e=>({error:e})));if(t.error)return this.diagnosticResults.tokenStatus={status:"error",message:"Token validation failed",details:t.error},!1;this.diagnosticResults.tokenStatus={status:"success",message:"Token valid",details:t};const n=["user:read:email","chat:read","chat:edit","channel:manage:redemptions","channel:read:redemptions"].filter((e=>!t.scopes.includes(e)));return n.length>0?(this.diagnosticResults.permissions={status:"error",message:"Missing required scopes: "+n.join(", ")},!1):(this.diagnosticResults.permissions={status:"success",message:"All required permissions granted",details:{scopes:t.scopes}},t.client_id)}catch(e){return this.diagnosticResults.tokenStatus={status:"error",message:"Error checking token status",details:e.toString()},!1}},async checkApiConnectivity(){try{const e=await fetch("https://api.pixelplush.dev/v1/status").then((e=>200===e.status?{success:!0}:{success:!1,status:e.status})).catch((e=>({success:!1,error:e.toString()}))),t=await fetch("https://api.twitch.tv/helix",{method:"OPTIONS"}).then((e=>({success:!0,status:e.status}))).catch((e=>({success:!0})));return this.diagnosticResults.apiConnectivity={status:e.success?"success":"error",message:e.success?"API connectivity OK":"API connectivity issues",details:{pixelPlush:e,twitch:t}},e.success}catch(e){return this.diagnosticResults.apiConnectivity={status:"error",message:"Error testing API connectivity",details:e.toString()},!1}},async checkAssetLoading(e){try{const t=await fetch(`${e}/assets/shamelist.txt`).then((e=>({success:e.ok,status:e.status}))).catch((e=>({success:!1,error:e.toString()})));return this.diagnosticResults.assetLoading={status:t.success?"success":"error",message:t.success?"Asset loading OK":"Asset loading issues",details:t},t.success}catch(e){return this.diagnosticResults.assetLoading={status:"error",message:"Error checking asset loading",details:e.toString()},!1}},async testRedemptionCreation(e,t){try{if(!e)return this.diagnosticResults.redemptionCreation={status:"error",message:"No client ID available"},!1;const t=`Test Reward ${Math.floor(1e4*Math.random())}`,n=await ComfyJS.CreateChannelReward(e,{title:t,prompt:"Test reward for troubleshooting",cost:1,is_enabled:!0,background_color:"#FF0000",is_user_input_required:!1,is_max_per_stream_enabled:!1,is_max_per_user_per_stream_enabled:!1,is_global_cooldown_enabled:!0,global_cooldown_seconds:30,should_redemptions_skip_request_queue:!0}).catch((e=>({error:e})));return n&&!n.error?(await ComfyJS.DeleteChannelReward(e,n.id).catch((()=>{})),this.diagnosticResults.redemptionCreation={status:"success",message:"Redemption creation successful",details:{reward:t}},!0):(this.diagnosticResults.redemptionCreation={status:"error",message:"Failed to create test redemption",details:n.error},!1)}catch(e){return this.diagnosticResults.redemptionCreation={status:"error",message:"Error testing redemption creation",details:e.toString()},!1}},async runFullDiagnostics(e){this.resetDiagnostics(),e.onProgress&&e.onProgress("Checking token status...");const t=await this.checkTokenStatus(e.token);e.onProgress&&e.onProgress("Checking API connectivity..."),await this.checkApiConnectivity(),e.onProgress&&e.onProgress("Checking asset loading..."),await this.checkAssetLoading(e.assetPath),t&&e.channel&&(e.onProgress&&e.onProgress("Testing redemption creation..."),await this.testRedemptionCreation(t,e.channel));const n=this.generateReport();return e.onComplete&&e.onComplete(n),e.showOnScreen&&this.showReportOnScreen(n),n},generateReport(){const e=this.diagnosticResults,t=Object.values(e).filter((e=>e&&"error"===e.status)).length,n=Object.values(e).filter((e=>e&&"warning"===e.status)).length;let s=t>0?"error":n>0?"warning":"success",a=t>0?`Found ${t} issues`:n>0?`Found ${n} warnings`:"Everything looks good!",o=`Results: ${a}. `;return e.tokenStatus&&(o+=`Token: ${"error"===e.tokenStatus.status?"[ERROR]":"warning"===e.tokenStatus.status?"[WARNING]":"[OK]"} ${e.tokenStatus.message}. `),e.permissions&&(o+=`Permissions: ${"error"===e.permissions.status?"[ERROR]":"[OK]"} ${e.permissions.message}. `),e.redemptionCreation&&(o+=`Redemptions: ${"error"===e.redemptionCreation.status?"[ERROR]":"[OK]"} ${e.redemptionCreation.message}. `),e.assetLoading&&(o+=`Assets: ${"error"===e.assetLoading.status?"[ERROR]":"[OK]"} ${e.assetLoading.message}. `),e.apiConnectivity&&(o+=`API: ${"error"===e.apiConnectivity.status?"[ERROR]":"[OK]"} ${e.apiConnectivity.message}.`),{overallStatus:s,summary:a,details:e,chatReport:o}},showReportOnScreen(e){this.hideReportFromScreen();const t=document.createElement("div");t.id="report-diagnostic-panel",t.style.cssText=`\n            position: absolute;\n            top: 20px;\n            left: 20px;\n            background-color: rgba(0, 0, 0, 0.8);\n            border: 2px solid ${"error"===e.overallStatus?"#ff4444":"warning"===e.overallStatus?"#ffbb22":"#44ff44"};\n            border-radius: 8px;\n            padding: 15px;\n            color: white;\n            font-family: Arial, sans-serif;\n            z-index: 10000;\n            max-width: 600px;\n            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n        `;const n=document.createElement("h2");n.style.cssText=`\n            margin: 0 0 10px 0;\n            padding: 0;\n            color: ${"error"===e.overallStatus?"#ff4444":"warning"===e.overallStatus?"#ffbb22":"#44ff44"};\n            font-size: 18px;\n        `,n.textContent=`${e.summary}`,t.appendChild(n);const s={},a=document.createElement("div");a.style.cssText="\n            margin-bottom: 15px;\n        ",t.appendChild(a);const o=this.diagnosticResults,r={tokenStatus:"Token Status",permissions:"Permissions",redemptionCreation:"Redemptions",assetLoading:"Asset Loading",apiConnectivity:"API Connectivity"};Object.keys(r).forEach((e=>{if(o[e]){const t=document.createElement("div");t.style.cssText=`\n                    margin: 5px 0;\n                    padding: 5px;\n                    border-radius: 4px;\n                    background-color: ${"error"===o[e].status?"rgba(255, 50, 50, 0.3)":"warning"===o[e].status?"rgba(255, 187, 0, 0.3)":"rgba(50, 255, 50, 0.3)"};\n                    display: flex;\n                    align-items: center;\n                `;const n=document.createElement("span");n.style.cssText="\n                    margin-right: 8px;\n                    font-size: 16px;\n                    font-weight: bold;\n                    width: 20px;\n                    text-align: center;\n                ","error"===o[e].status?(n.textContent="X",n.style.color="#ff4444"):"warning"===o[e].status?(n.textContent="!",n.style.color="#ffbb22"):(n.textContent="-",n.style.color="#44ff44"),t.appendChild(n);const i=document.createElement("span");i.style.cssText="\n                    flex: 1;\n                    font-size: 14px;\n                ",i.innerHTML=`<strong>${r[e]}:</strong> ${o[e].message}`,t.appendChild(i),a.appendChild(t),s[e]=t}}));const i=document.createElement("button");i.style.cssText="\n            background-color: #4466ff;\n            color: white;\n            border: none;\n            padding: 8px 15px;\n            border-radius: 4px;\n            cursor: pointer;\n            font-size: 14px;\n            display: block;\n            width: 100%;\n        ",i.textContent="Close Panel (!close)",i.addEventListener("click",(()=>this.hideReportFromScreen())),t.appendChild(i),document.body.appendChild(t),this.displayElements.container=t,this.displayElements.title=n,this.displayElements.items=s,this.displayElements.clearButton=i;const l=document.createElement("p");l.style.cssText="\n            margin: 10px 0;\n            font-size: 12px;\n            opacity: 0.8;\n            text-align: center;\n        ",l.textContent="Type !close in chat to dismiss this panel",t.appendChild(l)},hideReportFromScreen(){this.displayElements.container&&(document.body.removeChild(this.displayElements.container),this.displayElements.container=null,this.displayElements.title=null,this.displayElements.items={},this.displayElements.clearButton=null)}};"undefined"!=typeof module&&module.exports&&(module.exports=e);let t="Stream Weather",n={},s={},a="",o=1920,r=1080,i=.5;function l(e){return Math.floor(Math.random()*Math.floor(e))}async function c(e){return await fetch("https://id.twitch.tv/oauth2/validate",{headers:{Authorization:`OAuth ${e}`}}).then((e=>e.json())).catch((e=>({error:e})))}async function d(e){return await fetch(`https://api.pixelplush.dev/v1/auth/refresh?token=${e}`).then((e=>e.json())).catch((e=>({error:e})))}window.setupGame=function(e,l,c){t=e,n=l,s=c,a=n.path||"",s.clouds=void 0===s.clouds||null===s.clouds?!s.overlay:"true"===s.clouds,i=void 0===s.volume||null===s.volume?0:parseInt(s.volume)/100,o=Math.min(window.innerWidth,1920),r=Math.min(window.innerHeight,1080)},window.WebFontConfig={custom:{families:["Pixeltype"]},active(){!async function(){try{const e=(await fetch(`${a}/assets/shamelist.txt`).then((e=>e.text()))).split(",").map((e=>e.trim().toLowerCase()));if(s.channel&&e&&e.includes(s.channel.toLowerCase())&&(console.log("This channel has been blocked for violating the PixelPlush Terms of Service."),!1),s.oauth&&(s.oauth=await async function(e,t){const n=localStorage.getItem("pixelplush_token"),s=localStorage.getItem("pixelplush_refresh");if(n){const e=await c(n);if(console.log("stored access token",e),e&&e.user_id&&e.scopes&&["user:read:email","chat:read","chat:edit","channel:manage:redemptions","channel:read:redemptions"].every((t=>e.scopes.includes(t))))return n}if(s){const e=await d(s);if(console.log("stored refresh token",e),e&&e.access_token&&e.scope&&["user:read:email","chat:read","chat:edit","channel:manage:redemptions","channel:read:redemptions"].every((t=>e.scope.includes(t))))return localStorage.setItem("pixelplush_token",e.access_token),localStorage.setItem("pixelplush_refresh",e.refresh_token),e.access_token}const a=await c(e);if(console.log("provided access token",a),a&&a.user_id&&a.scopes&&["user:read:email","chat:read","chat:edit","channel:manage:redemptions","channel:read:redemptions"].every((e=>a.scopes.includes(e))))return localStorage.setItem("pixelplush_token",e),localStorage.setItem("pixelplush_refresh",t),e;if(t){const e=await d(t);if(console.log("provided refresh token",e),e&&e.access_token&&e.scope&&["user:read:email","chat:read","chat:edit","channel:manage:redemptions","channel:read:redemptions"].every((t=>e.scope.includes(t))))return localStorage.setItem("pixelplush_token",e.access_token),localStorage.setItem("pixelplush_refresh",e.refresh_token),e.access_token}return console.log("no valid tokens"),null}(s.oauth.replace("oauth:",""),s.refreshToken)),n.requires)try{if(account=await fetch("https://stats.pixelplush.dev/v1/accounts",{headers:{Twitch:s.oauth?s.oauth.replace("oauth:",""):void 0}}).then((e=>e.json())),account.error)throw"Login Error";if(!account.owned.includes(n.requires))throw"Item not owned"}catch(e){return void console.log("Auth Validate Failed",e)}m.forEach((e=>{s[`${e}Time`]?p[e]=parseInt(s[`${e}Time`]):p[e]=5}))}catch(e){console.log(e)}if(Unicorn.Create("unicorn-display",{width:o,height:r,background:"transparent",init:D,update:N,channel:s.channel,username:s.oauth?s.channel:void 0,password:s.oauth?s.oauth.replace("oauth:",""):void 0,onCommand:_,onChat:v,wallTop:!1,wallBottom:!0,gravity:{x:0,y:1}}),ComfyJS.onCheer=b,ComfyJS.onConnected=async(e,t,n)=>{if(n){let e=await y();0!==e&&(u=e.session,setInterval((()=>{y()}),6e4));let t=await ComfyJS.GetChannelRewards(h,!0),n=Object.keys(g);for(let e=0;e<n.length;e++){let a=n[e];if(t.some((e=>e.title===a))){if(!s[m[e]]){let e=t.find((e=>e.title===a));e&&(await ComfyJS.DeleteChannelReward(h,e.id),await f(100))}}else if(m[e]in s)try{await ComfyJS.CreateChannelReward(h,{title:a,prompt:g[a].desc,cost:s[m[e]],is_enabled:!0,background_color:g[a].color,is_user_input_required:!1,is_max_per_stream_enabled:!1,is_max_per_user_per_stream_enabled:!1,is_global_cooldown_enabled:!0,global_cooldown_seconds:g[a].cooldown,should_redemptions_skip_request_queue:!0}),await f(100)}catch(e){console.log(e)}}}},ComfyJS.onReward=(e,t,n,s,a)=>{g[t]&&g[t].callback()},s.oauth){let e=await c(s.oauth.replace("oauth:",""));h=e.client_id,["user:read:email","chat:read","chat:edit","channel:manage:redemptions","channel:read:redemptions"].every((t=>e.scopes.includes(t)))||console.log("Need more permissions"),e.expires_in<1800&&console.log("Token expires soon. Need to generate new link")}}()}},function(){const e=document.createElement("script");e.src=("https:"===document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",e.type="text/javascript",e.async="true";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();var u="";let h="";const m=["rain","heavyrain","lightning","rainbow","sunshine","snow","blizzard","blossoms","hail","leaf"];let p={};const g={"Make It Rain!":{desc:"Let raindrops fall",color:"#00E5CB",cost:1,cooldown:1,callback:()=>{C(p.rain)}},"HEAVY RAIN!":{desc:"Lots and strong rains",color:"#00E5CB",cost:1,cooldown:3,callback:()=>{S(p.heavyrain)}},"Lightning BZZT!":{desc:"Flash of lightning!",color:"#00E5CB",cost:1,cooldown:30,callback:()=>{$()}},"Rainbow!!!":{desc:"Colors colors everywhere!",color:"#00E5CB",cost:1,cooldown:30,callback:()=>{R()}},"Make It Shine!!":{desc:"Let there be light!",color:"#00E5CB",cost:1,cooldown:30,callback:()=>{E()}},"Let It Snow!!!":{desc:"Wintry Fun!",color:"#00E5CB",cost:1,cooldown:1,callback:()=>{P(p.snow)}},"HEAVY SNOW!!!":{desc:"It's a blizzard out here!",color:"#00E5CB",cost:1,cooldown:3,callback:()=>{O(p.blizzard)}},"Flower Power!":{desc:"Beautiful Cherry Blossoms!",color:"#00E5CB",cost:1,cooldown:1,callback:()=>{M(p.blossoms)}},"Holy Hail!!":{desc:"Ice rocks from the sky!",color:"#00E5CB",cost:1,cooldown:3,callback:()=>{j(p.hail)}},"Make It Leaf!":{desc:"Let leaves fall across the stream",color:"#00E5CB",cost:1,cooldown:3,callback:()=>{z(p.leaf)}}};async function f(e){return new Promise(((t,n)=>{setTimeout((()=>{t()}),e)}))}async function y(){return fetch("https://api.pixelplush.dev/v1/analytics/heartbeat",{method:"POST",body:JSON.stringify({session:u,game:"weather",theme:t,channel:s.channel,players:[s.channel],count:1})}).then((e=>e.json()))}let w=0;async function _(t,n,o,r,i){if(!document.hidden){if((r.broadcaster||r.mod)&&"resetweather"===n){let e=await ComfyJS.GetChannelRewards(h,!0),t=Object.keys(g);for(let n=0;n<t.length;n++){let s=t[n],a=e.find((e=>e.title===s));a&&await ComfyJS.DeleteChannelReward(h,a.id)}location.reload()}if((r.broadcaster||r.mod)&&"deleteweather"===n){let e=await ComfyJS.GetChannelRewards(h,!0),t=Object.keys(g);for(let n=0;n<t.length;n++){let s=t[n],a=e.find((e=>e.title===s));a&&await ComfyJS.DeleteChannelReward(h,a.id)}}if((r.broadcaster||r.mod)&&("weathertest"===n||"weatherdiag"===n)){ComfyJS.Say("Running StreamWeather tests... Please wait.");const t={token:s.oauth,assetPath:a,channel:s.channel,showOnScreen:!0,onProgress:e=>{console.log(`Diagnostic progress: ${e}`)},onComplete:e=>{ComfyJS.Say(e.chatReport),console.log("StreamWeather Report:",e)}};try{await e.runFullDiagnostics(t)}catch(e){console.error("Error during diagnostics:",e),ComfyJS.Say("[ERROR] Failed running diagnostics. Check browser console for details.")}}"close"===n&&(e.hideReportFromScreen(),(r.broadcaster||r.mod)&&ComfyJS.Say("Diagnostic panel cleared from overlay.")),(r.broadcaster||r.mod||r.vip)&&"rain"===n&&C(parseInt(o||5)),(r.broadcaster||r.mod||r.vip)&&"heavyrain"===n&&S(parseInt(o||5)),(r.broadcaster||r.mod||r.vip)&&"lightning"===n&&$(),(r.broadcaster||r.mod||r.vip)&&"rainbow"===n&&R(),(r.broadcaster||r.mod||r.vip)&&"sunrays"===n&&E(),(r.broadcaster||r.mod||r.vip)&&"snow"===n&&P(5),(r.broadcaster||r.mod||r.vip)&&"heavysnow"===n&&O(5),(r.broadcaster||r.mod||r.vip)&&"blossoms"===n&&M(5),(r.broadcaster||r.mod||r.vip)&&"leaves"===n&&z(5),(r.broadcaster||r.mod||r.vip)&&"hail"===n&&j(5)}}function v(e,t,n,s,a){document.hidden}function b(e,t,n,s,a){document.hidden}let x={},k={};function C(e){Unicorn.PlaySound("sfx_rain",{volume:i});for(let t=0;t<e;t++){for(let e=0;e<100;e++)setTimeout((()=>{L(`raindrop_${l(3)+1}`,l(1920))}),l(1e3)+1e3*t);t>0&&t%5==0&&setTimeout((()=>{Unicorn.PlaySound("sfx_rain",{volume:i})}),1e3*t-l(1e3))}}function $(){L("lightning",0);let e=l(3e3);setTimeout((()=>{Unicorn.PlaySound(`sfx_thunder${l(2)+1}`,{volume:1e3*i/(e+1e3)})}),e)}function S(e){Unicorn.PlaySound("sfx_heavyrain",{volume:i});for(let t=0;t<e;t++){for(let e=0;e<200;e++)setTimeout((()=>{L(`heavy_rain_${l(11)+1}`,l(3840)-960)}),l(1e3)+1e3*t);t>0&&t%5==0&&setTimeout((()=>{Unicorn.PlaySound("sfx_heavyrain",{volume:i})}),1e3*t-l(1e3))}}function R(){Unicorn.PlaySound("sfx_rainbow",{volume:i}),L("rainbow",0)}function E(){Unicorn.PlaySound("sfx_sunshine",{volume:i}),L("sunrays",0),setTimeout((()=>{L("sunrays",0)}),.25*k.sunrays*x.sunrays.length*1e3)}function L(e,t){w++;let n="particle_"+w,s=Unicorn.AddObject(n,{type:"rectangle",scale:{x:3,y:3},animations:{anim:{framerate:k[e],frames:x[e].slice(),loop:!1}},isStatic:!0,x:t,y:0,z:100});"rainbow"!==e&&"sunrays"!==e&&(s.animations.anim.alpha=.25+.5*Math.random()),s.animations.anim.anchor.set(0),setTimeout((()=>{Unicorn.RemoveObject(n)}),.25*k[e]*x[e].length*1e3)}let U=[];function T(e,t=0){let n=l(10),s="snow_"+ ++w;const a=.5+.75*Math.random(),o=`snowflake${l(7)+1}`;let r=Unicorn.AddBacklay(s,o,l(3840)+t,-100,{scale:{x:2*a,y:2*a}});r.velocity=e||{x:0,y:0},r.name=s,r.progress=0,r.offset=n,U.push(r)}function P(e){for(let t=0;t<e;t++)for(let e=0;e<30;e++)setTimeout((()=>{T()}),l(1e3)+1e3*t);setTimeout((()=>{Unicorn.RemoveParticles(name)}),1e3*e)}function O(e){Unicorn.PlaySound("sfx_wind",{volume:i});for(let t=0;t<e;t++){for(let e=0;e<300;e++)setTimeout((()=>{T({x:500,y:500},-960)}),l(1e3)+1e3*t);t>0&&t%5==0&&setTimeout((()=>{Unicorn.PlaySound("sfx_wind",{volume:i})}),1e3*t-l(1e3))}setTimeout((()=>{Unicorn.RemoveParticles(name)}),1e3*e)}let A=[];function I(e,t=0){let n=l(10),s="blossom_"+ ++w;const a=.5+.75*Math.random();let o=Unicorn.AddBacklay(s,`blossom${l(12)+1}`,l(3840)+t,-100,{scale:{x:2*a,y:2*a}});o.velocity=e||{x:0,y:0},o.name=s,o.progress=0,o.offset=n,A.push(o)}function M(e){for(let t=0;t<e;t++)for(let e=0;e<300;e++)setTimeout((()=>{I({x:100,y:100},-960)}),l(1e3)+1e3*t)}async function B(){w++;let e=null,t=l(6)+1;e=Unicorn.AddObject("hailDrop_"+w,{type:"circle",sprite:`hail_${t}`,scale:{x:2,y:2},x:l(1.25*o),y:-100-l(50),z:100,radius:5}),e.restitution=0,e.friction=1,e.frictionStatic=1,e.frictionAir=0,e.sprite.alpha=.5,e.rotationOffset=Math.random()*Math.PI,Unicorn.SetVelocity("hailDrop_"+w,-12,20),setTimeout((()=>{Unicorn.RemoveObject(e.label)}),3e3)}function j(e){Unicorn.PlaySound("sfx_heavyrain",{volume:i});for(let t=0;t<e;t++){for(let e=0;e<100;e++)setTimeout((()=>{L(`heavy_rain_${l(11)+1}`,l(3840)-960)}),l(1e3)+1e3*t);for(let e=0;e<200;e++)setTimeout((()=>{B()}),l(1e3)+1e3*t);t>0&&t%5==0&&setTimeout((()=>{Unicorn.PlaySound("sfx_heavyrain",{volume:i})}),1e3*t-l(1e3))}}let F=[];function J(){let e=l(2160)-1080,t=l(10),n="leaf_"+ ++w;const s=.5+.75*Math.random();let a=Unicorn.AddBacklay(n,`leaf${l(14)+1}`,-100,e,{scale:{x:2*s,y:2*s}});a.name=n,a.progress=0,a.offset=t,F.push(a)}function z(e){for(let t=0;t<e;t++)for(let e=0;e<50;e++)setTimeout((()=>{J()}),l(2e3)+1e3*t)}function D(){PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST;for(let e=1;e<=11;e++){x[`heavy_rain_${e}`]=[],k[`heavy_rain_${e}`]=16/60;for(let t=0;t<12;t++)Unicorn.Load(`heavy_rain_${e}_${t}`,`${a}/assets/stream-weather/heavy_rain/heavy_rain_${e}/heavy_rain_${e}_${t+1}.png`),x[`heavy_rain_${e}`].push(`heavy_rain_${e}_${t}`)}x.lightning=[],k.lightning=16/60;for(let e=0;e<4;e++)Unicorn.Load(`lightning_${e}`,`${a}/assets/stream-weather/lightning/lightning${e+1}.png`),x.lightning.push(`lightning_${e}`);for(let e=1;e<=3;e++){x[`raindrop_${e}`]=[],k[`raindrop_${e}`]=16/60;for(let t=0;t<10;t++)Unicorn.Load(`raindrop_${e}_${t}`,`${a}/assets/stream-weather/raindrop/raindrop${e}/raindrop${e}_${t+1}.png`),x[`raindrop_${e}`].push(`raindrop_${e}_${t}`)}x.rainbow=[],k.rainbow=16/60;for(let e=0;e<39;e++)Unicorn.Load(`rainbow_${e}`,`${a}/assets/stream-weather/rainbow/rainbow${e}.png`),x.rainbow.push(`rainbow_${e}`);x.sunrays=[],k.sunrays=16/60;for(let e=0;e<40;e++)Unicorn.Load(`sunrays_${e}`,`${a}/assets/stream-weather/sunrays/sunrays${e}.png`),x.sunrays.push(`sunrays_${e}`);for(let e=0;e<7;e++)Unicorn.Load(`snowflake${e+1}`,`${a}/assets/game-parachute/christmas_theme/snowflake_${e+1}.png`);for(let e=0;e<12;e++)Unicorn.Load(`blossom${e+1}`,`${a}/assets/game-parachute/spring_theme/petal${e+1}.png`);Unicorn.Load("leaf1",`${a}/assets/game-parachute/autumn_theme/leaf1.png`),Unicorn.Load("leaf2",`${a}/assets/game-parachute/autumn_theme/leaf2.png`),Unicorn.Load("leaf3",`${a}/assets/game-parachute/autumn_theme/leaf3.png`),Unicorn.Load("leaf4",`${a}/assets/game-parachute/autumn_theme/leaf4.png`),Unicorn.Load("leaf5",`${a}/assets/game-parachute/autumn_theme/leaf5.png`),Unicorn.Load("leaf6",`${a}/assets/game-parachute/autumn_theme/leaf6.png`),Unicorn.Load("leaf7",`${a}/assets/game-parachute/autumn_theme/leaf_gold.png`),Unicorn.Load("leaf8",`${a}/assets/game-parachute/autumn_theme/oak_gold.png`),Unicorn.Load("leaf9",`${a}/assets/game-parachute/autumn_theme/oak1.png`),Unicorn.Load("leaf10",`${a}/assets/game-parachute/autumn_theme/oak2.png`),Unicorn.Load("leaf11",`${a}/assets/game-parachute/autumn_theme/oak3.png`),Unicorn.Load("leaf12",`${a}/assets/game-parachute/autumn_theme/oak4.png`),Unicorn.Load("leaf13",`${a}/assets/game-parachute/autumn_theme/oak5.png`),Unicorn.Load("leaf14",`${a}/assets/game-parachute/autumn_theme/oak6.png`);for(let e=0;e<6;e++)Unicorn.Load(`hail_${e+1}`,`${a}/assets/stream-weather/hail/hail_blue/hail${e+1}.png`);for(let e=0;e<2;e++)Unicorn.Load(`sfx_thunder${e+1}`,`web/thunder${e+1}.mp3`);Unicorn.Load("sfx_rain","web/rain.mp3"),Unicorn.Load("sfx_rainbow","web/rainbow.mp3"),Unicorn.Load("sfx_sunshine","web/sunshine.mp3"),Unicorn.Load("sfx_heavyrain","web/heavyrain.mp3"),Unicorn.Load("sfx_wind","web/wind.mp3")}function N(e,t){const n=t/1e3;for(let e=0;e<F.length;e++){let t=F[e].progress+=n/10;t>=1?(Unicorn.RemoveBacklay(F[e].name),F.splice(e--,1)):(F[e].x=2480*Math.sin(t)-100,F[e].y+=n/10*1080+F[e].offset/10+Math.sin(20*t+F[e].offset),F[e].angle=10*Math.cos(20*t)+60*F[e].offset)}for(let e=0;e<U.length;e++){let t=U[e].progress+=n/10;t>=1?(Unicorn.RemoveBacklay(U[e].name),U.splice(e--,1)):(U[e].x+=U[e].velocity.x*n,U[e].y+=U[e].velocity.y*n+(n/10*1180+U[e].offset/10)+Math.sin(20*t+U[e].offset),U[e].angle=10*Math.cos(20*t)+60*U[e].offset)}let s=[];for(let e=0;e<A.length;e++){let t=A[e].progress+=n/10;t>=1?s.push(A[e].name):(A[e].x+=A[e].velocity.x*n,A[e].y+=A[e].velocity.y*n+(n/10*1180+A[e].offset/10)+Math.sin(20*t+A[e].offset),A[e].angle=10*Math.cos(20*t)+60*A[e].offset)}A=A.filter((e=>!s.includes(e.name)));for(let e=0;e<s.length;e++)Unicorn.RemoveBacklay(s[e])}